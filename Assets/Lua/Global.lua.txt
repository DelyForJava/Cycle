ccreate = coroutine.create
cyield = coroutine.yield
cresume = coroutine.resume

require 'Event'

require 'Config/ConfigData'


ULog = CS.UnityEngine.Debug.Log

UGameObject = CS.UnityEngine.GameObject

USceneManager=CS.UnityEngine.SceneManagement.SceneManager

UButton = CS.UnityEngine.UI.Button
UImage = CS.UnityEngine.UI.Image
UText = CS.UnityEngine.UI.Text
UInputField = CS.UnityEngine.UI.InputField
UToggle = CS.UnityEngine.UI.Toggle
USlider = CS.UnityEngine.UI.Slider


BAssetBundleManager = CS.Bean.Hall.AssetBundleManager

BResReload = CS.Bean.Hall.ResReload
BUrl = CS.Bean.Hall.GlobalData.Url
BChannelId = CS.Bean.Hall.GlobalData.ChannelId

BCdn = CS.Bean.Hall.GlobalData.Cdn

BCallback = CS.Bean.Hall.Callback
BHallData = CS.Bean.Hall.HallData


-- ---------------------------------- callback ----------------------------------------
OnClickTouristLuaCallCS = function()
	local canvas = UGameObject.Find("Canvas").transform
	local gameObject = canvas:Find("Waiting").gameObject
	gameObject:SetActive(true)
	BCallback.OnClickTourist()
end

OnClickWechatLuaCallCS = function()
	local canvas = UGameObject.Find("Canvas").transform
	local gameObject = canvas:Find("Waiting").gameObject
	gameObject:SetActive(true)
	BCallback.OnClickWechat()
end

OnLoginCSCallLua = function()
	print("I am callback from csharp")
	--UGameObject.Find("Canvas/Waiting"):SetActive(false)
	local canvas = UGameObject.Find("Canvas").transform
	local gameObject = canvas:Find("Waiting").gameObject
	
	--require("Login/Login").Close()
	require("Hall/Hall").Show(gameObject)
	-- gameObject:SetActive(false)

end

OnChangeGenderCSCallLua = function()
	print("I am callback from csharp: LoadGenderImage")
	require("Hall/Avater/Avater").LoadGenderImage()
end

OnChangeNameCSCallLua = function()
	print("I am callback from csharp: change name")
	require("Hall/Avater/Avater").Update()
end

-- ---------------------------------- callback ----------------------------------------







StartReload = function(self)
	print("-------------------------------- Reload --------------------------------")
    local resReload = UGameObject.Find("Canvas/"..self.transform.gameObject.name):AddComponent( typeof(BResReload) )
    -- resReload:SendMessage("OnReload",name)
    return resReload
end

ReloadImage = function(self)
	self.resReload:SendMessage("OnStepImage",tostring(self.index) )
end

ReloadImageAsync2 = ccreate(function(index)
	-- for i=0,images.Length-1 do
		self.resReload:SendMessage("OnStepImage",index)
		return cyield()
	-- end
end)

